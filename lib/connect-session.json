{
    "_id": "_design/connect-sessions",
    "language":"javascript",
    "views": {
        "all": {
            "map": "function (doc) {
                if (doc.type == 'connect-session') {
                    emit(doc._id, doc);
                }
            }"
        },
        "valid": {
            "map": "function (doc) {
                if (doc.type == 'connect-session' && doc.ttl > (+new Date - doc.ctime)) {
                    emit(doc._id, doc);
                }
            }"
        }
    }
}
