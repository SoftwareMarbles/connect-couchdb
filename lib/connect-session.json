{
    "_id": "_design/connect-sessions",
    "language":"javascript",
    "views": {
        "all": {
            "map": "function (doc) {
                if (doc.type == 'connect-session') emit(null, doc);
            }"
        },
        "valid": {
            "map": "function (doc) {
                if (doc.type == 'connect-session' && doc.ttl < (+new Date - doc.ctime)) {
                    emit(null, doc);
                }
            }"
        }
    }
}
